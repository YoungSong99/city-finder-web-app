<div class="rating_card">
  <h2>User Rating</h2>
  <div class="flex-div">
    <div>
      <span class="fa fa-star checked"></span>
      <span class="fa fa-star checked"></span>
      <span class="fa fa-star checked"></span>
      <span class="fa fa-star checked"></span>
      <span class="fa fa-star"></span>
    </div>
    <h5> <%= city.average_rating %> average based on <%= city.reviews_count %> reviews</h5>
  </div>
  <hr>
  <% (1..5).reverse_each do |rating| %>
    <% rating_count = city.reviews.where(ratings: rating).count %>
    <% width_percentage = (rating_count.to_f / city.reviews_count * 100).round(2) %>
    <div class="row">
      <div class="flex-div">
        <div class="grid"><%= rating %><span class="fa fa-star checked"></span></div>
        <div class="bar-container">
          <div class="bar" style="width: <%= width_percentage %>%"></div>
        </div>
        <div class="rating-count"><%= rating_count %></div>
      </div>
    </div>
  <% end %>
</div>